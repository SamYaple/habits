:80 {
	# ---- API: match /api/* first ----
	@api path /api/*

	handle @api {
		uri strip_prefix /api
		reverse_proxy http://habits-server:8080
	}

	# ---- SPA: static + fallback ----
	handle {
		root * /usr/share/caddy
		encode zstd gzip
		try_files {path} /index.html
		file_server
	}
}
